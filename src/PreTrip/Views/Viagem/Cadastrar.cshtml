@model PreTrip.ViewModel.ViagensViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="bg-img-content">
    <aside id="bgImgViagem" class="bg-img-content-img" style="background-color: deepskyblue;"></aside>

    <div class="row bg-img-content-ctn wrapcenter col-md-10 wrapcenter card">
        @using (Html.BeginForm("Cadastrar", "Viagem", FormMethod.Post, new { @class = "row" }))
        {
            if (!Html.ViewData.ModelState.IsValid)
            {
                <div class="alert alert-danger validation-box" role="alert">
                    <p style="margin: 0; padding: 0;">
                        <i class="material-icons" style="vertical-align: middle;">error</i>
                        <strong>Oops!</strong>
                    </p>
                    <p style="margin: 0; padding: 0;">
                        Parece que você preencheu algo errado:
                    </p>

                    @Html.ValidationSummary(false)
                </div>
            }

            <div class="form-group">
                <label for="descricao">Título</label>
                @Html.EditorFor(model => model.Viagem.Titulo, new { htmlAttributes = new { placeholder = "Que tal... \"Turismo em Copacabana - Rio de Janeiro\"?", @class = "form-control" } })
                <span class="help-block">Para onde vai a viagem? Talvez colocar um nome chamativo ou uma pequena lista dos locais ajude :)</span>
            </div>

            <div class="form-group">
                <label for="descricao">URL para Imagem</label>
                @Html.EditorFor(model => model.Viagem.UrlImagem, new { htmlAttributes = new { placeholder = "Url", @class = "form-control", id = "urlField" } })
                <span class="help-block">Insira uma imagem que demonstre o lugar para qual você vai</span>

                <script>
                    var img = document.getElementById('bgImgViagem')
                    var field = document.getElementById('urlField')

                    var url = "@Model.Viagem.UrlImagem"

                    if(url != "")
                    {
                        $('bgImgViagem').css('background-image', 'url(' + @Model.Viagem.UrlImagem + ') center')
                    }

                    field.onblur = function () {
                        if (document.getElementById("urlField").value != "")
                            img.setAttribute("style", "background-image: url(" + document.getElementById("urlField").value + ");");
                        else if(url != "")
                            img.setAttribute("style", "background-image: url(" + url + ");");
                        else
                            img.setAttribute("style", "background-color: deepskyblue;");
                    }
                </script>
            </div>

            <div class="form-group">
                <label for="descricao">Descrição</label>
                @Html.TextAreaFor(model => model.Viagem.Descricao, new { @class = "form-control" })
                <span class="help-block">Para onde vai a viagem? Talvez colocar um nome chamativo ou uma pequena lista dos locais ajude :) Ex: Viagem com tudo pago para Hopi Hari, caminho por são paulo...</span>
            </div>

            <div class="form-group">
                <label for="descricao">Preço da passagem</label>
                @Html.EditorFor(model => model.Viagem.PrecoPassagem, new { htmlAttributes = new { placeholder = "R$ 40,00", @class = "form-control" } })
                <span class="help-block">Coloque o preço estimado da passagem.</span>
            </div>

            <div class="form-group">
                <label for="descricao">Quantidade de lugares disponíveis</label>
                @Html.EditorFor(model => model.Viagem.QuantidadeLugaresDisponiveis, new { htmlAttributes = new { placeholder = "18", @class = "form-control" } })
                <span class="help-block">Quantos lugares estarão disponíveis inicialmente?</span>
            </div>

            <div class="row">
                <div class="col-md-6" style="padding: 0;">
                    <label for="descricao">Data/hora de saída</label>
                    @Html.EditorFor(model => model.Viagem.DtHrSaida, new { htmlAttributes = new { type = "datetime-local", @class = "form-control" } })
                </div>

                <div class="col-md-6" style="padding: 0;">
                    <label for="descricao">Data/hora da chegada estimada</label>
                    @Html.EditorFor(model => model.Viagem.DtHrChegadaEstimada, new { htmlAttributes = new { type = "datetime-local", @class = "form-control" } })
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md-6">
                    <h3>Endereço de Saída</h3>
                    <hr />

                    <div class="input-group">
                        <div class="row">
                            <label for="descricao">Rua</label>
                            @Html.EditorFor(model => model.Viagem.Origem.Rua, new { htmlAttributes = new { placeholder = "Rua Tiradentes...", @class = "form-control" } })
                        </div>
                        <br />
                        <div class="row">
                            <label for="descricao">Bairro</label>
                            @Html.EditorFor(model => model.Viagem.Origem.Bairro, new { htmlAttributes = new { placeholder = "Bairro Almanaque", @class = "form-control" } })
                        </div>
                        <br />
                        <div class="row">
                            <label for="descricao">Cidade</label>
                            @Html.EditorFor(model => model.Viagem.Origem.Cidade, new { htmlAttributes = new { placeholder = "São Paulo", @class = "form-control" } })
                        </div>
                        <br />
                        <div class="row">
                            <label for="descricao">Estado</label>
                            @Html.EditorFor(model => model.Viagem.Origem.Estado, new { htmlAttributes = new { placeholder = "São Paulo", @class = "form-control" } })
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-6" style="padding: 0;">
                                <label for="descricao">Número</label>
                                @Html.EditorFor(model => model.Viagem.Origem.Numero, new { htmlAttributes = new { placeholder = "301. Ou pode deixar vazio ;)", @class = "form-control" } })
                            </div>

                            <div class="col-md-6" style="padding: 0;">
                                <label for="descricao">Complemento</label>
                                @Html.EditorFor(model => model.Viagem.Origem.Complemento, new { htmlAttributes = new { placeholder = "Casa 02", @class = "form-control" } })
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group col-md-6">
                    <h3>Endereço de Destino</h3>
                    <hr />

                    <div class="input-group" style="display: inherit;">
                        <div class="row">
                            <label for="descricao">Rua</label>
                            @Html.EditorFor(model => model.Viagem.Destino.Rua, new { htmlAttributes = new { placeholder = "Calçadão de copacabana...", @class = "form-control" } })
                        </div>
                        <br />
                        <div class="row">
                            <label for="descricao">Bairro</label>
                            @Html.EditorFor(model => model.Viagem.Destino.Bairro, new { htmlAttributes = new { placeholder = "Bairro Copacabana", @class = "form-control" } })
                        </div>
                        <br />
                        <div class="row">
                            <label for="descricao">Cidade</label>
                            @Html.EditorFor(model => model.Viagem.Destino.Cidade, new { htmlAttributes = new { placeholder = "Rio de Janeiro", @class = "form-control" } })
                        </div>
                        <br />
                        <div class="row">
                            <label for="descricao">Estado</label>
                            @Html.EditorFor(model => model.Viagem.Destino.Estado, new { htmlAttributes = new { placeholder = "Rio de Janeiro", @class = "form-control" } })
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md-6">
                    <h3>Empresa</h3>
                    <hr />
                    <p>Empresa a qual esta viagem está vinculada! Pode ser quem está patrocinando esta viagem, ou somente à quem você trabalha :)</p>

                    <div class="input-group">
                        <div class="row">
                            <label for="descricao">Nome fantasia</label>
                            @Html.EditorFor(model => model.Viagem.Empresa.NomeFantasia, new { htmlAttributes = new { placeholder = "Viagens Sonhadoras", @class = "form-control" } })
                        </div>
                        <br />
                        <div class="row">
                            <label for="descricao">Razão social</label>
                            @Html.EditorFor(model => model.Viagem.Empresa.RazaoSocial, new { htmlAttributes = new { placeholder = "Viagens Sonhadoras & Sócios Ltda.", @class = "form-control" } })
                        </div>
                        <br />
                        <div class="row">
                            <label for="descricao">Cnpj</label>
                            @Html.EditorFor(model => model.Viagem.Empresa.Cnpj, new { htmlAttributes = new { placeholder = "Cnpj", @class = "form-control" } })
                        </div>
                    </div>
                </div>

                <div class="form-group col-md-6">
                    <h3>Veículo</h3>
                    <hr />

                    <div class="input-group" style="display: inherit;">
                        <div class="row">
                            <label for="descricao">Modelo</label>
                            @Html.EditorFor(model => model.Viagem.Veiculo.Modelo, new { htmlAttributes = new { placeholder = "Ducato ", @class = "form-control" } })
                        </div>
                        <br />
                        <div class="row">
                            <label for="descricao">Tipo</label>
                            @Html.EditorFor(model => model.Viagem.Veiculo.Tipo, new { htmlAttributes = new { placeholder = "Van", @class = "form-control" } })
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-6" style="padding: 0;">
                                <label for="descricao">Placa</label>
                                @Html.EditorFor(model => model.Viagem.Veiculo.Placa, new { htmlAttributes = new { placeholder = "BAN-1010", @class = "form-control" } })
                            </div>

                            <div class="col-md-6" style="padding: 0;">
                                <label for="descricao">Quantidade de lugares para passageiros</label>
                                @Html.EditorFor(model => model.Viagem.Veiculo.QuantidadeLugares, new { htmlAttributes = new { placeholder = "20", @class = "form-control" } })
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="clearfix"></div>
            <hr />

            <div class="pull-right">
                @Html.ActionLink("Cancelar", "Index", "Usuario", new { @class = "btn btn-danger" })
                <button type="submit" class="btn btn-warning">Cadastrar</button>
            </div>
        }
    </div>
</div>
